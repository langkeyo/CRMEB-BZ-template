---
title: 团购前台
language_tabs:
  - shell: Shell
  - http: HTTP
  - javascript: JavaScript
  - ruby: Ruby
  - python: Python
  - php: PHP
  - java: Java
  - go: Go
toc_footers: []
includes: []
search: true
code_clipboard: true
highlight_theme: darkula
headingLevel: 2
generator: "@tarslib/widdershins v4.0.30"

---

# 团购前台

Base URLs:

# Authentication

# 订单

## GET 获取订单列表

GET /api/group/order/order_list

获取用户的订单列表，支持分页和状态筛选

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|page|query|integer| 否 |页码|
|limit|query|integer| 否 |每页数量|
|status|query|integer| 否 |订单状态筛选（可选）|
|Authori-Zation|header|string| 否 |none|

> 返回示例

> 200 Response

```json
{
  "status": 200,
  "msg": "获取成功",
  "data": {
    "list": [
      {
        "id": 123,
        "order_number": "TG20241201123456789",
        "total_price": 199.98,
        "pay_price": 189.98,
        "status": 0,
        "status_text": "待支付",
        "create_time": 1701234567,
        "is_pay_delivery": 1
      }
    ],
    "total": 1
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

## GET 获取订单详情

GET /api/group/order/order_info/{order_id}

根据订单编号获取订单详细信息

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|order_id|path|string| 是 |订单id|
|Authori-Zation|header|string| 否 |none|

> 返回示例

> 200 Response

```json
{
  "status": 200,
  "msg": "操作成功",
  "data": {
    "id": 0,
    "order_number": "string",
    "uid": 0,
    "group_id": 0,
    "admin_id": 0,
    "community_id": 0,
    "combination_id": 0,
    "total_price": 0.1,
    "coupon_price": 0.1,
    "pay_price": 0.1,
    "status": 0,
    "status_text": "string",
    "paid": 0,
    "pay_type": 0,
    "pay_type_text": "string",
    "is_pay_delivery": 0,
    "refund_reason": "string",
    "create_time": 0,
    "pay_time": 0,
    "goods": [
      {
        "combination_id": 4,
        "goods_name": "测试商品2",
        "price": "99.99",
        "quantity": 5,
        "subtotal": "499.95"
      }
    ]
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

## POST 创建团购订单

POST /api/group/order/createOrder

支持多张优惠券叠加使用的订单创建

> Body 请求参数

```yaml
combination_id: 0
quantity: 1
user_coupon_ids: ""
remark: ""

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Authori-Zation|header|string| 否 |none|
|body|body|object| 否 |none|
|» combination_id|body|integer| 是 |拼团商品配置ID|
|» quantity|body|integer| 否 |数量|
|» user_coupon_ids|body|[integer]| 否 |多张用户优惠券ID数组（新增）|
|» remark|body|string| 否 |订单备注|

> 返回示例

> 200 Response

```json
{
  "status": 200,
  "msg": "订单创建成功",
  "data": {
    "order_id": 123,
    "order_number": "GRP202412301234567",
    "total_amount": 150,
    "is_cod_allowed": true
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» status|integer|false|none||none|
|» msg|string|false|none||none|
|» data|object|false|none||none|
|»» order_id|integer|false|none||none|
|»» order_number|string|false|none||none|
|»» total_amount|number|false|none||none|
|»» is_cod_allowed|boolean|false|none||none|

## POST 获取订单可用优惠券

POST /api/group/order/getOrderCoupons

获取指定订单可以使用的优惠券列表

> Body 请求参数

```yaml
order_id: 123

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Authori-Zation|header|string| 否 |none|
|body|body|object| 否 |none|
|» order_id|body|integer| 是 |订单ID|

> 返回示例

> 200 Response

```json
{
  "status": 200,
  "msg": "操作成功",
  "data": {
    "order_info": {},
    "available_coupons": [
      {
        "id": 0,
        "name": "string",
        "discount_amount": 0.1,
        "min_amount": 0.1,
        "expire_time": 0
      }
    ]
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|获取成功|Inline|

### 返回数据结构

## POST 设置订单优惠券

POST /api/group/order/setOrderCoupon

支持多张优惠券叠加使用的订单优惠券设置

> Body 请求参数

```yaml
order_id: 0
user_coupon_ids: ""

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Authori-Zation|header|string| 否 |none|
|body|body|object| 否 |none|
|» order_id|body|integer| 是 |订单ID|
|» user_coupon_ids|body|[integer]| 否 |优惠卷id(支持批量)|

> 返回示例

> 200 Response

```json
{
  "status": 200,
  "msg": "优惠券叠加使用成功",
  "data": {
    "total_discount": 50,
    "final_amount": 100,
    "used_coupons_count": 3
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» status|integer|false|none||none|
|» msg|string|false|none||none|
|» data|object|false|none||none|
|»» total_discount|number|false|none||none|
|»» final_amount|number|false|none||none|
|»» used_coupons_count|integer|false|none||none|

## POST 处理订单支付

POST /api/group/order/payOrder/{order_id}

处理订单支付，支持微信、支付宝、余额、货到付款

> Body 请求参数

```yaml
pay_type: 1

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|order_id|path|integer| 是 |订单id|
|Authori-Zation|header|string| 否 |none|
|body|body|object| 否 |none|
|» pay_type|body|integer| 是 |支付类型：1-微信，2-支付宝，3-余额，4-货到付款|

> 返回示例

> 200 Response

```json
{
  "status": 200,
  "msg": "货到付款订单确认成功",
  "data": {
    "order_number": "TG20241201123456789",
    "pay_price": 189.98,
    "pay_type": 4
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|处理成功|Inline|

### 返回数据结构

## POST 确认收货

POST /api/group/order/confirmReceipt

用户确认收货

> Body 请求参数

```yaml
order_id: 123

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Authori-Zation|header|string| 否 |none|
|body|body|object| 否 |none|
|» order_id|body|integer| 是 |订单ID|

> 返回示例

> 200 Response

```json
{
  "status": 200,
  "msg": "确认收货成功",
  "data": []
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|确认成功|[ApiResponse](#schemaapiresponse)|

## POST 取消订单

POST /api/group/order/cancelOrder

用户取消未支付的订单

> Body 请求参数

```yaml
order_id: 123

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Authori-Zation|header|string| 否 |none|
|body|body|object| 否 |none|
|» order_id|body|integer| 是 |订单ID|

> 返回示例

> 200 Response

```json
{
  "status": 200,
  "msg": "订单取消成功",
  "data": []
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|取消成功|[ApiResponse](#schemaapiresponse)|

## POST 申请退款

POST /api/group/order/applyRefund

用户申请订单退款

> Body 请求参数

```yaml
order_id: 123
reason: 商品质量问题
amount: 0

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Authori-Zation|header|string| 否 |none|
|body|body|object| 否 |none|
|» order_id|body|integer| 是 |订单ID|
|» reason|body|string| 是 |退款原因|
|» amount|body|number(float)| 否 |退款金额，0表示全额退款|

> 返回示例

> 200 Response

```json
{
  "status": 200,
  "msg": "退款申请提交成功，等待管理员审核",
  "data": []
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|申请成功|[ApiResponse](#schemaapiresponse)|

# 数据模型

<h2 id="tocS_Coupon">Coupon</h2>

<a id="schemacoupon"></a>
<a id="schema_Coupon"></a>
<a id="tocScoupon"></a>
<a id="tocscoupon"></a>

```json
{
  "id": 0,
  "name": "string",
  "discount_amount": 0.1,
  "min_amount": 0.1,
  "expire_time": 0
}

```

优惠券信息

### 属性

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|id|integer|false|none||优惠券ID|
|name|string|false|none||优惠券名称|
|discount_amount|number(float)|false|none||优惠金额|
|min_amount|number(float)|false|none||最低使用金额|
|expire_time|integer|false|none||过期时间|

<h2 id="tocS_OrderListItem">OrderListItem</h2>

<a id="schemaorderlistitem"></a>
<a id="schema_OrderListItem"></a>
<a id="tocSorderlistitem"></a>
<a id="tocsorderlistitem"></a>

```json
{
  "id": 0,
  "order_number": "string",
  "total_price": 0.1,
  "pay_price": 0.1,
  "status": 0,
  "status_text": "string",
  "create_time": 0,
  "is_pay_delivery": 0
}

```

### 属性

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|id|integer|false|none||订单ID|
|order_number|string|false|none||订单编号|
|total_price|number(float)|false|none||订单总价|
|pay_price|number(float)|false|none||支付金额|
|status|integer|false|none||订单状态|
|status_text|string|false|none||订单状态文本|
|create_time|integer|false|none||创建时间|
|is_pay_delivery|integer|false|none||是否货到付款|

<h2 id="tocS_OrderDetail">OrderDetail</h2>

<a id="schemaorderdetail"></a>
<a id="schema_OrderDetail"></a>
<a id="tocSorderdetail"></a>
<a id="tocsorderdetail"></a>

```json
{
  "id": 0,
  "order_number": "string",
  "uid": 0,
  "group_id": 0,
  "admin_id": 0,
  "community_id": 0,
  "combination_id": 0,
  "total_price": 0.1,
  "coupon_price": 0.1,
  "pay_price": 0.1,
  "status": 0,
  "status_text": "string",
  "paid": 0,
  "pay_type": 0,
  "pay_type_text": "string",
  "is_pay_delivery": 0,
  "refund_reason": "string",
  "create_time": 0,
  "pay_time": 0,
  "goods": [
    {
      "combination_id": 4,
      "goods_name": "测试商品2",
      "price": "99.99",
      "quantity": 5,
      "subtotal": "499.95"
    }
  ]
}

```

订单详情信息

### 属性

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|id|integer|false|none||订单ID|
|order_number|string|false|none||订单编号|
|uid|integer|false|none||用户ID|
|group_id|integer|false|none||团ID|
|admin_id|integer|false|none||团长ID|
|community_id|integer|false|none||社区ID|
|combination_id|integer|false|none||拼团商品配置ID|
|total_price|number(float)|false|none||订单总价|
|coupon_price|number(float)|false|none||优惠券优惠金额|
|pay_price|number(float)|false|none||支付金额|
|status|integer|false|none||订单状态：0-待支付，1-待收货，2-已完成，3-退款中，4-售后中，5-已退款|
|status_text|string|false|none||订单状态文本|
|paid|integer|false|none||支付状态：0-未支付，1-已支付|
|pay_type|integer|false|none||支付类型：0-未知，1-微信，2-支付宝，3-余额，4-货到付款|
|pay_type_text|string|false|none||支付类型文本|
|is_pay_delivery|integer|false|none||是否货到付款：0-否，1-是|
|refund_reason|string|false|none||退款原因|
|create_time|integer|false|none||创建时间|
|pay_time|integer|false|none||支付时间|
|goods|[[OrderGoods](#schemaordergoods)]|false|none||订单商品列表|

<h2 id="tocS_OrderGoods">OrderGoods</h2>

<a id="schemaordergoods"></a>
<a id="schema_OrderGoods"></a>
<a id="tocSordergoods"></a>
<a id="tocsordergoods"></a>

```json
{
  "combination_id": 4,
  "goods_name": "测试商品2",
  "price": "99.99",
  "quantity": 5,
  "subtotal": "499.95"
}

```

### 属性

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|combination_id|integer|false|none||拼团商品配置ID|
|goods_name|string|false|none||商品名称|
|price|string(decimal)|false|none||商品单价|
|quantity|integer|false|none||购买数量|
|subtotal|string(decimal)|false|none||小计金额|

<h2 id="tocS_ApiResponse">ApiResponse</h2>

<a id="schemaapiresponse"></a>
<a id="schema_ApiResponse"></a>
<a id="tocSapiresponse"></a>
<a id="tocsapiresponse"></a>

```json
{
  "status": 200,
  "msg": "操作成功",
  "data": null
}

```

### 属性

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|status|integer|true|none||响应状态码|
|msg|string|true|none||响应消息|
|data|null|false|none||响应数据|

